<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1221px" preserveAspectRatio="none" style="width:2255px;height:1221px;background:#FFFFFF;" version="1.1" viewBox="0 0 2255 1221" width="2255px" zoomAndPan="magnify"><title>Ticket Purchase (Simple Flow)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="238.9365" x="1004.0613" y="27.9951">Ticket Purchase (Simple Flow)</text><g><title>TicketObserver</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1663.1602" y="788.3828"/></g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="19.9551" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="23" x2="23" y1="118.5938" y2="1140.8438"/></g><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="206.7661" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="210.2466" x2="210.2466" y1="118.5938" y2="1140.8438"/></g><g><title>Route .web.php.</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="638.3174" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="641.9727" x2="641.9727" y1="118.5938" y2="1140.8438"/></g><g><title>SimpleTicketController</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="843.1875" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="846.5249" x2="846.5249" y1="118.5938" y2="1140.8438"/></g><g><title>SimpleBookingService</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="1053.6055" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1057.5869" x2="1057.5869" y1="118.5938" y2="1140.8438"/></g><g><title>SimplePaymentService</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="1236.3564" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1239.624" x2="1239.624" y1="118.5938" y2="1140.8438"/></g><g><title>SimpleNotificationService</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="1431.0259" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1434.0889" x2="1434.0889" y1="118.5938" y2="1140.8438"/></g><g><title>TicketObserver</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="1664.1602" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1667.874" x2="1667.874" y1="118.5938" y2="1140.8438"/></g><g><title>DB .events. tickets.</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="2109.3252" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2113.1216" x2="2113.1216" y1="118.5938" y2="1140.8438"/></g><g><title>View</title><rect fill="#000000" fill-opacity="0.00000" height="1022.25" width="8" x="2215.2939" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="2218.5288" x2="2218.5288" y1="118.5938" y2="1140.8438"/></g><g class="participant participant-head" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="115.292">User</text><ellipse cx="23.9551" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,58.7969 L23.9551,85.7969 M10.9551,66.7969 L36.9551,66.7969 M23.9551,85.7969 L10.9551,100.7969 M23.9551,85.7969 L36.9551,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="U"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="5" y="1152.8389">User</text><ellipse cx="23.9551" cy="1164.6406" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.9551,1172.6406 L23.9551,1199.6406 M10.9551,1180.6406 L36.9551,1180.6406 M23.9551,1199.6406 L10.9551,1214.6406 M23.9551,1199.6406 L36.9551,1214.6406" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="B"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="175.2466" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="182.2466" y="107.292">Browser</text></g><g class="participant participant-tail" data-participant="B"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.0391" x="175.2466" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.0391" x="182.2466" y="1159.8389">Browser</text></g><g class="participant participant-head" data-participant="R"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130.6895" x="576.9727" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.6895" x="583.9727" y="107.292">Route (web.php)</text></g><g class="participant participant-tail" data-participant="R"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130.6895" x="576.9727" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.6895" x="583.9727" y="1159.8389">Route (web.php)</text></g><g class="participant participant-head" data-participant="STC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173.3252" x="760.5249" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.3252" x="767.5249" y="107.292">SimpleTicketController</text></g><g class="participant participant-tail" data-participant="STC"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173.3252" x="760.5249" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159.3252" x="767.5249" y="1159.8389">SimpleTicketController</text></g><g class="participant participant-head" data-participant="SBS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.0371" x="972.5869" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0371" x="979.5869" y="107.292">SimpleBookingService</text></g><g class="participant participant-tail" data-participant="SBS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="170.0371" x="972.5869" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156.0371" x="979.5869" y="1159.8389">SimpleBookingService</text></g><g class="participant participant-head" data-participant="SPS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.4648" x="1152.624" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.4648" x="1159.624" y="107.292">SimplePaymentService</text></g><g class="participant participant-tail" data-participant="SPS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175.4648" x="1152.624" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.4648" x="1159.624" y="1159.8389">SimplePaymentService</text></g><g class="participant participant-head" data-participant="SNS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193.874" x="1338.0889" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179.874" x="1345.0889" y="107.292">SimpleNotificationService</text></g><g class="participant participant-tail" data-participant="SNS"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193.874" x="1338.0889" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179.874" x="1345.0889" y="1159.8389">SimpleNotificationService</text></g><g class="participant participant-head" data-participant="TO"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.5723" x="1607.874" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.5723" x="1614.874" y="107.292">TicketObserver</text></g><g class="participant participant-tail" data-participant="TO"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="120.5723" x="1607.874" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106.5723" x="1614.874" y="1159.8389">TicketObserver</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.4072" x="2041.1216" y="115.292">DB (events, tickets)</text><path d="M2095.3252,66.2969 C2095.3252,56.2969 2113.3252,56.2969 2113.3252,56.2969 C2113.3252,56.2969 2131.3252,56.2969 2131.3252,66.2969 L2131.3252,92.2969 C2131.3252,102.2969 2113.3252,102.2969 2113.3252,102.2969 C2113.3252,102.2969 2095.3252,102.2969 2095.3252,92.2969 L2095.3252,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M2095.3252,66.2969 C2095.3252,76.2969 2113.3252,76.2969 2113.3252,76.2969 C2113.3252,76.2969 2131.3252,76.2969 2131.3252,66.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.4072" x="2041.1216" y="1152.8389">DB (events, tickets)</text><path d="M2095.3252,1166.1406 C2095.3252,1156.1406 2113.3252,1156.1406 2113.3252,1156.1406 C2113.3252,1156.1406 2131.3252,1156.1406 2131.3252,1166.1406 L2131.3252,1192.1406 C2131.3252,1202.1406 2113.3252,1202.1406 2113.3252,1202.1406 C2113.3252,1202.1406 2095.3252,1202.1406 2095.3252,1192.1406 L2095.3252,1166.1406" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M2095.3252,1166.1406 C2095.3252,1176.1406 2113.3252,1176.1406 2113.3252,1176.1406 C2113.3252,1176.1406 2131.3252,1176.1406 2131.3252,1166.1406" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="V"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.5303" x="2195.5288" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5303" x="2202.5288" y="107.292">View</text></g><g class="participant participant-tail" data-participant="V"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="47.5303" x="2195.5288" y="1139.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33.5303" x="2202.5288" y="1159.8389">View</text></g><g><title>TicketObserver</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="1663.1602" y="788.3828"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2248.0591" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="200.7607" x="1023.6492" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182.2349" x="1029.6492" y="154.6606">Availability Check (AJAX)</text><g class="message" data-participant-1="U" data-participant-2="B"><polygon fill="#181818" points="198.7661,188.8594,208.7661,192.8594,198.7661,196.8594,202.7661,192.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="204.7661" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162.811" x="30.9551" y="187.7935">Click "Check Availability"</text></g><g class="message" data-participant-1="B" data-participant-2="R"><polygon fill="#181818" points="630.3174,217.9922,640.3174,221.9922,630.3174,225.9922,634.3174,221.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="210.7661" x2="636.3174" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231.3911" x="217.7661" y="216.9263">GET api/events/{event}/availability</text></g><g class="message" data-participant-1="R" data-participant-2="STC"><polygon fill="#181818" points="835.1875,247.125,845.1875,251.125,835.1875,255.125,839.1875,251.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="642.3174" x2="841.1875" y1="251.125" y2="251.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.9492" x="649.3174" y="246.0591">availability(eventId)</text></g><g class="message" data-participant-1="STC" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,276.2578,2111.3252,280.2578,2101.3252,284.2578,2105.3252,280.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="847.1875" x2="2107.3252" y1="280.2578" y2="280.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.0122" x="854.1875" y="275.1919">count sold vs capacity</text></g><g class="message" data-participant-1="DB" data-participant-2="STC"><polygon fill="#181818" points="858.1875,305.3906,848.1875,309.3906,858.1875,313.3906,854.1875,309.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="852.1875" x2="2112.3252" y1="309.3906" y2="309.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.5098" x="864.1875" y="304.3247">numbers</text></g><g class="message" data-participant-1="STC" data-participant-2="B"><polygon fill="#181818" points="221.7661,334.5234,211.7661,338.5234,221.7661,342.5234,217.7661,338.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="215.7661" x2="846.1875" y1="338.5234" y2="338.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.0146" x="227.7661" y="333.4575">JSON {available: true, remaining: N}</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2248.0591" x="0" y="367.0898"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="367.0898" y2="367.0898"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="370.0898" y2="370.0898"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="150.6904" x="1048.6843" y="356.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="132.1646" x="1054.6843" y="372.5903">Purchase Request</text><g class="message" data-participant-1="U" data-participant-2="B"><polygon fill="#181818" points="198.7661,406.7891,208.7661,410.7891,198.7661,414.7891,202.7661,410.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="23.9551" x2="204.7661" y1="410.7891" y2="410.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.6152" x="30.9551" y="405.7231">Click "Purchase"</text></g><g class="message" data-participant-1="B" data-participant-2="R"><polygon fill="#181818" points="630.3174,435.9219,640.3174,439.9219,630.3174,443.9219,634.3174,439.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="210.7661" x2="636.3174" y1="439.9219" y2="439.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="407.5513" x="217.7661" y="434.856">POST api/events/{event}/purchase (qty, payment_method, ...)</text></g><g class="message" data-participant-1="R" data-participant-2="STC"><polygon fill="#181818" points="835.1875,465.0547,845.1875,469.0547,835.1875,473.0547,839.1875,469.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="642.3174" x2="841.1875" y1="469.0547" y2="469.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.8701" x="649.3174" y="463.9888">purchase(eventId, Request)</text></g><g class="message" data-participant-1="STC" data-participant-2="SBS"><polygon fill="#181818" points="1045.6055,494.1875,1055.6055,498.1875,1045.6055,502.1875,1049.6055,498.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="847.1875" x2="1051.6055" y1="498.1875" y2="498.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186.418" x="854.1875" y="493.1216">reserve(eventId, userId, qty)</text></g><g class="message" data-participant-1="SBS" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,523.3203,2111.3252,527.3203,2101.3252,531.3203,2105.3252,527.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1057.6055" x2="2107.3252" y1="527.3203" y2="527.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="394.71" x="1064.6055" y="522.2544">INSERT tickets (status='pending', payment_status='unpaid')</text></g><g class="message" data-participant-1="DB" data-participant-2="SBS"><polygon fill="#181818" points="1068.6055,552.4531,1058.6055,556.4531,1068.6055,560.4531,1064.6055,556.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1062.6055" x2="2112.3252" y1="556.4531" y2="556.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64.8857" x="1074.6055" y="551.3872">ticket{id}</text></g><g class="message" data-participant-1="SBS" data-participant-2="STC"><polygon fill="#181818" points="858.1875,581.5859,848.1875,585.5859,858.1875,589.5859,854.1875,585.5859" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="852.1875" x2="1056.6055" y1="585.5859" y2="585.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36.48" x="864.1875" y="580.52">ticket</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2248.0591" x="0" y="614.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="614.1523" y2="614.1523"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="617.1523" y2="617.1523"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="147.8594" x="1050.0999" y="603.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.3335" x="1056.0999" y="619.6528">Payment (simple)</text><g class="message" data-participant-1="STC" data-participant-2="SPS"><polygon fill="#181818" points="1228.3564,653.8516,1238.3564,657.8516,1228.3564,661.8516,1232.3564,657.8516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="847.1875" x2="1234.3564" y1="657.8516" y2="657.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.8735" x="854.1875" y="652.7856">chargeOrMarkPaid(ticket)</text></g><g class="message" data-participant-1="SPS" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,682.9844,2111.3252,686.9844,2101.3252,690.9844,2105.3252,686.9844" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1240.3564" x2="2107.3252" y1="686.9844" y2="686.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="500.9951" x="1247.3564" y="681.9185">UPDATE tickets SET payment_status='paid', status='confirmed' WHERE id=?</text></g><g class="message" data-participant-1="DB" data-participant-2="SPS"><polygon fill="#181818" points="1251.3564,712.1172,1241.3564,716.1172,1251.3564,720.1172,1247.3564,716.1172" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1245.3564" x2="2112.3252" y1="716.1172" y2="716.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15.4819" x="1257.3564" y="711.0513">ok</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2248.0591" x="0" y="744.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="744.6836" y2="744.6836"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="747.6836" y2="747.6836"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="221.0986" x="1013.4802" y="734.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="202.5728" x="1019.4802" y="750.1841">TicketObserver side-effects</text><g class="message" data-participant-1="TO" data-participant-2="STC"><polygon fill="#181818" points="858.1875,784.3828,848.1875,788.3828,858.1875,792.3828,854.1875,788.3828" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="852.1875" x2="1662.1602" y1="788.3828" y2="788.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.2593" x="864.1875" y="783.3169">(listens to Ticket updated/created)</text></g><g class="message" data-participant-1="TO" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,813.5156,2111.3252,817.5156,2101.3252,821.5156,2105.3252,817.5156" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1673.1602" x2="2107.3252" y1="817.5156" y2="817.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="416.165" x="1680.1602" y="812.4497">recalc event availability (update events table or cached counts)</text></g><g class="message" data-participant-1="TO" data-participant-2="SNS"><polygon fill="#181818" points="1446.0259,842.6484,1436.0259,846.6484,1446.0259,850.6484,1442.0259,846.6484" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1440.0259" x2="1662.1602" y1="846.6484" y2="846.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204.1343" x="1452.0259" y="841.5825">notifyPurchase(userId, ticketId)</text></g><g class="message" data-participant-1="SNS" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,871.7813,2111.3252,875.7813,2101.3252,879.7813,2105.3252,875.7813" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1435.0259" x2="2107.3252" y1="875.7813" y2="875.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380.7769" x="1442.0259" y="870.7153">INSERT notifications (user_id, type='purchase', unread=1)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="2248.0591" x="0" y="904.3477"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="904.3477" y2="904.3477"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="2248.0591" y1="907.3477" y2="907.3477"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="89.1372" x="1079.4609" y="893.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70.6113" x="1085.4609" y="909.8481">Response</text><g class="message" data-participant-1="STC" data-participant-2="B"><polygon fill="#181818" points="221.7661,944.0469,211.7661,948.0469,221.7661,952.0469,217.7661,948.0469" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="215.7661" x2="846.1875" y1="948.0469" y2="948.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197.7358" x="227.7661" y="942.981">JSON {success:true, ticket_id}</text></g><g class="message" data-participant-1="B" data-participant-2="R"><polygon fill="#181818" points="630.3174,973.1797,640.3174,977.1797,630.3174,981.1797,634.3174,977.1797" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="210.7661" x2="636.3174" y1="977.1797" y2="977.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.6743" x="217.7661" y="972.1138">GET /tickets/my-tickets</text></g><g class="message" data-participant-1="R" data-participant-2="STC"><polygon fill="#181818" points="835.1875,1002.3125,845.1875,1006.3125,835.1875,1010.3125,839.1875,1006.3125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="642.3174" x2="841.1875" y1="1006.3125" y2="1006.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76.5972" x="649.3174" y="1001.2466">myTickets()</text></g><g class="message" data-participant-1="STC" data-participant-2="DB"><polygon fill="#181818" points="2101.3252,1031.4453,2111.3252,1035.4453,2101.3252,1039.4453,2105.3252,1035.4453" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="847.1875" x2="2107.3252" y1="1035.4453" y2="1035.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="454.7461" x="854.1875" y="1030.3794">SELECT * FROM tickets WHERE user_id=? ORDER BY created_at DESC</text></g><g class="message" data-participant-1="DB" data-participant-2="STC"><polygon fill="#181818" points="858.1875,1060.5781,848.1875,1064.5781,858.1875,1068.5781,854.1875,1064.5781" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="852.1875" x2="2112.3252" y1="1064.5781" y2="1064.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53.3965" x="864.1875" y="1059.5122">tickets[]</text></g><g class="message" data-participant-1="STC" data-participant-2="V"><polygon fill="#181818" points="2207.2939,1089.7109,2217.2939,1093.7109,2207.2939,1097.7109,2211.2939,1093.7109" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="847.1875" x2="2213.2939" y1="1093.7109" y2="1093.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.3306" x="854.1875" y="1088.645">render tickets/my-tickets.blade.php</text></g><g class="message" data-participant-1="V" data-participant-2="B"><polygon fill="#181818" points="221.7661,1118.8438,211.7661,1122.8438,221.7661,1126.8438,217.7661,1122.8438" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="215.7661" x2="2218.2939" y1="1122.8438" y2="1122.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1294" x="227.7661" y="1117.7778">200 OK (list of QR/IDs)</text></g><!--SRC=[RLLTRzf047pthrZn4hiYqFOHYKOnk6twWQbDqbPL5HtdfPmmFjTt9a9H_dltV3x7f3pP-6PtPtPs3orqZh0IV8SQbdN5jqmX-AdOb_JzVIuV0izZNCiARXLMm1JSUYMhjE2YP8M6GLZ91pePcAFmz2YHjQPa3xWUbTioQ239ASGMilLdij2LpFCsMRgQdSE6Kkv4yIV5wY0uMcIOdaCksN6FXJv1BiyY5rABZU1C2rcSm1Slu9Pel2R1XvRcAlOofjdQz6qm3y770nLLGz0DLbdPynUjkHFuq1pSUTvq2jS79dAs5hdGHvXjaU_0l_vq_IE0wTIxXSjt44vWbbD66DZZViJ02mqacS27Q0Mi56FBOVpOF9_6h0Vs4eEbvawW_zdIlia2ZuuCOauLkQo9h99v1WS5d9MCcmoayjBbAEhz6YjbeopFJscyWCSsUOuJq5MDGwXmpqH1rarWyTIexkOjmRyrAdr6h8CyIrp6wLcDPJUyV_Ln2AKr_twFUYkp8On6ew0dtQ6TxA7ZqEcdePeGvyRfPrHDlysJQX0oJ5sdRXPfbAoSv-0hpNIjfXSb5Xb9ldWcv4xgecGYkmYwRffwDlvHP4yskQDhlzkcsJnKeXdTPa8SvIMb85dL7uohhwpQBQc2RsE9xR9ZUxkSNw-YZcrAK_EINaDk2EudbyL6L7lCBk3xnoY9G6JJguwwgIjt3RtJ3G4bChp4pGOvrI6cgxYpmC-5qbWeqD9TG7L9guJPc5Tede6vUSI1NisMsL13lqBESWwDAIT33BxDO8yeiva_eBkBCxx5pCwp2XoB1T4kpEeVtPZvpb_RccOT5YzDBdgt1LbjGkw5YJcMI8rhKr7pwe9qPDCtWPTXNudfKuAgf73ixEllZgevHwKcTd4ibtip5Fqz7xVsZVV7o_QrD-3xe-sfyaysEes-HBCLl8BtIVor6m1hQIjaUWLnCeyI27z2QyGzqp2Fqjd9vhV1ltwx_7V6cI8Zr_zdDbhdB4FpD-3TEQrlNx-6-BET0v0R-9QCR-Og-0S0]--></g></svg>